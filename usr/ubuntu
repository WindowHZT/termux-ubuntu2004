
#å­—ä½“é¢œè‰²
red="\e[31;1m"      #çº¢
green="\e[32;1m"   #ç»¿
yellow="\e[33;1m"  #é»„
blue="\e[34;1m"    #è“
purple="\e[35;1m"    #ç´«çº¢
cyanine="\e[36;1m"    #é’è“
white="\e[0m"

msg() { clear;echo -e "\n\t\t$blue[*]$white$1$2$white\n" ;:;}  ##è‡ªå®šä¹‰é€šå‘Šé¢œè‰²
enter() { echo -en "\n\n$greenæŒ‰å›è½¦ç»§ç»­$white";read op ;:;}  ##
s=0

:<<EOF
	case $op in
    	1)
    		
    		;;
    	2)
    		
    		;;
    	3)
    		
    		;;
    	4)
    		
    		;;
    	5)
    		
    		;;
	esac
EOF






##ğŸ
_chromium(){
	_i(){
		msg $red "å®‰è£…Chromiumæµè§ˆå™¨"
		sudo apt-get install apt-utils -y
		sudo apt purge chromium* chromium-browser* snapd -y -qq 
		sudo apt autoremove -y -qq
		sudo apt purge chromium* chromium-browser* -y -qq 
		sudo apt autoremove -y -qq
		sudo apt update -qq
		sudo apt install software-properties-common gnupg --no-install-recommends -y -qq
		echo "deb http://ftp.debian.org/debian buster main
		deb http://ftp.debian.org/debian buster-updates main" >> /etc/apt/sources.list

		apt-key adv --keyserver keyserver.ubuntu.com --recv-keys DCC9EFBF77E11517
		apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 648ACFD622F3D138
		apt-key adv --keyserver keyserver.ubuntu.com --recv-keys AA8E81B4331F7F50
		apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 112695A0E562B32A

		sudo apt update -y
		sudo apt install chromium -y
		sed -i 's/chromium %U/chromium --no-sandbox --test-type %U/g' /usr/share/applications/chromium.desktop
		
		cat <<-EOF > ~/Desktop/chromium.desktop
		[Desktop Entry]
		Version=1.0
		Name=Chromium Web Browser
		Exec=/usr/bin/chromium --no-sandbox --test-type %U
		Terminal=false
		X-MultipleArgs=false
		Type=Application
		Icon=chromium
		Categories=Network;WebBrowser;
		MimeType=text/html;text/xml;application/xhtml_xml;application/x-mimearchive;x-scheme-handler/http;x-scheme-handler/https;
		StartupWMClass=chromium
		StartupNotify=true
		EOF
		
		chmod +x  ~/Desktop/chromium.desktop
		msg $green "å®‰è£…å®Œæ¯•ï½"
		enter
	}
	
	_d(){
		msg $red "å¸è½½Chromiumæµè§ˆå™¨"
		sudo apt purge chromium* chromium-browser* snapd -y -qq 
		sudo apt autoremove -y -qq
		rm -rf ~/Desktop/chromium.desktop
		
		msg $green "å¸è½½å®Œæ¯•ï½"
		enter
	}
	
	OPTIONS=(
         1 "å®‰è£…Chromiumæµè§ˆå™¨"
         2 "å¸è½½Chromiumæµè§ˆå™¨"
         3 "å–æ¶ˆ")
    
    _dialog "é¦–é¡µâ†’å®‰è£…/å¸è½½è½¯ä»¶â†’Chromiumæµè§ˆå™¨" "è¯·é€‰æ‹©" $OPTIONS

	case $op in
    	1)
    		_i
    		;;
    	2)
    		_d
    		;;
    	*)
    		return
    		;;
	esac
}

##ğŸ
_firefox(){
	_i(){
		##æŠŠç«ç‹æ›´åˆ°æœ€æ–°ç‰ˆ
		msg $red "å®‰è£…firefoxæµè§ˆå™¨"
		sudo apt update -y
		sudo apt upgrade -y
		sudo apt purge firefox -y
		#apt install gnupg gnupg2 gnupg1 software-properties-common plank -y
		sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys A6DCF7707EBC211F	
		sudo apt-add-repository "deb http://ppa.launchpad.net/ubuntu-mozilla-security/ppa/ubuntu bionic main"
		sudo apt update -y
		sudo apt install firefox -y
		
		cat <<-EOF > ~/Desktop/firefox.desktop
		[Desktop Entry]
		Name=firefox
		Comment=firefox
		Exec=/usr/lib/firefox/firefox
		Icon=/usr/lib/firefox/browser/chrome/icons/default/default128.png
		Terminal=false
		Type=Application
		Categories=Application;
		Encoding=UTF-8
		StartupNotify=true
		EOF
		
		chmod +x ~/Desktop/firefox.desktop
		msg $green "å®‰è£…å®Œæ¯•ï½"
		echo -e "\n\n\t$redæ³¨æ„ï¼šç”±äºç«ç‹çš„å…¼å®¹æ€§ï¼Œå¯èƒ½ä¼šå¯¼è‡´æµè§ˆå™¨å´©æºƒçš„æƒ…å†µ$white"
		echo -e "\t$redè§£å†³æ–¹æ³•ï¼šæ‰“å¼€ç«ç‹åœ¨åœ°å€æ è¾“å…¥ about:config å›è½¦ï¼Œç„¶åæ¥å—é£é™©å‘ŠçŸ¥(Accept the risk and continue)$white"
		echo -e "\t$redç„¶ååœ¨å°æœç´¢æ é‡Œé¢è¾“å…¥ sandbox $white"
		echo -e "\t$redæŠŠ media.cubeb.sandbox çš„å€¼æ”¹ä¸º false$white"
		echo -e "\t$redæŠŠ security.sandbox.content.level çš„å€¼æ”¹æˆ 0$white"
		enter
		echo -e "$redè¿™å°†ä¼šå¯¼è‡´ä½ çš„æµè§ˆå™¨æ— æ³•ä½¿ç”¨ï¼Œè¯·ä½ æˆªå›¾æˆ–è®°ä½è§£å†³æ–¹æ¡ˆï¼$white"
		enter
	}
	
	_d(){
		msg $red "å¸è½½firefoxæµè§ˆå™¨"
		sudo apt purge firefox -y 
		rm -rf ~/Desktop/firefox.desktop
		
		msg $green "å¸è½½å®Œæ¯•ï½"
		enter
	}
	
	OPTIONS=(
         1 "å®‰è£…firefoxæµè§ˆå™¨"
         2 "å¸è½½firefoxæµè§ˆå™¨"
         3 "å–æ¶ˆ")
    
    _dialog "é¦–é¡µâ†’å®‰è£…/å¸è½½è½¯ä»¶â†’ç«ç‹firefoxæµè§ˆå™¨" "è¯·é€‰æ‹©" $OPTIONS

	case $op in
    	1)
    		_i
    		;;
    	2)
    		_d
    		;;
    	*)
    		return
    		;;
	esac

}

##ğŸ
_idea(){
	_i(){
		cd /opt
		if [ "$1" == "1" ];then
			if [ -d /opt/ideaIC ];then
				OPTIONS=(
	        	1 "æ˜¯"
        		2 "å¦")
        		
    			_dialog "é¦–é¡µâ†’å®‰è£…è½¯ä»¶â†’IntelliJ IDEA" "æ£€æµ‹åˆ°ä½ ä¹‹å‰å·²ç»å®‰è£…è¿‡ideaICç‰ˆï¼Œæ˜¯å¦å¸è½½é‡è£…ï¼Ÿ" $OPTIONS
				case $op in
    				1)
			    		rm -rf /opt/ideaIC
   				 		;;
			    	*)
			    		return
			    		;;
				esac
			fi

			msg $red "å®‰è£…IntelliJ IDEAå…è´¹ç‰ˆ"
			echo -e "\n$greenè¯·ä¿æŒç½‘ç»œé€šç•…ï¼ˆæœ¬æ¬¡ä¸‹è½½å¯ä»¥ä¸ç”¨åŠ é€Ÿå™¨ï¼ï¼‰$white"
			##å…è´¹ç‰ˆ
			wget -c https://download-cdn.jetbrains.com/idea/ideaIC-2022.2.tar.gz
			[ "$?" == "0" ] && mkdir /opt/ideaIC && tar -zxvf /opt/ideaIC-2022.2.tar.gz -C /opt/ideaIC --strip-components 1

			##åˆ›å»ºæ¡Œé¢å›¾æ ‡
			cat <<-EOF> ~/Desktop/ideaIC.desktop
			[Desktop Entry]
			Name=IntelliJ IDEA
			Comment=IntelliJ IDEA
			Exec=/opt/ideaIC/bin/idea.sh
			Icon=/opt/ideaIC/bin/idea.png
			Terminal=false
			Type=Application
			Categoories=Developer;
			EOF
			
			chmod +x /opt/ideaIC/bin/idea.sh
			chmod u+x ~/Desktop/ideaIC.desktop
		else
			if [ -d /opt/ideaIU ];then
				OPTIONS=(
	        	1 "æ˜¯"
        		2 "å¦")
        		
    			_dialog "é¦–é¡µâ†’å®‰è£…è½¯ä»¶â†’IntelliJ IDEA" "æ£€æµ‹åˆ°ä½ ä¹‹å‰å·²ç»å®‰è£…è¿‡ideaIUç‰ˆï¼Œæ˜¯å¦å¸è½½é‡è£…ï¼Ÿ" $OPTIONS
				case $op in
    				1)
			    		rm -rf /opt/ideaIU
   				 		;;
			    	*)
			    		return
			    		;;
				esac
			fi
			msg $red "å®‰è£…IntelliJ IDEAä»˜è´¹ç‰ˆ"
			echo -e "\n$greenè¯·ä¿æŒç½‘ç»œé€šç•…ï¼ˆæœ¬æ¬¡ä¸‹è½½å¯ä»¥ä¸ç”¨åŠ é€Ÿå™¨ï¼ï¼‰$white"
			##ä»˜è´¹ç‰ˆ
			wget -c https://download-cdn.jetbrains.com/idea/ideaIU-2022.2.tar.gz 
			[ "$?" == "0" ] && mkdir /opt/ideaIU && tar -zxvf /opt/ideaIU-2022.2.tar.gz -C /opt/ideaIU --strip-components 1
			
			##åˆ›å»ºæ¡Œé¢å›¾æ ‡
			cat <<-EOF> ~/Desktop/ideaIU.desktop
			[Desktop Entry]
			Name=IntelliJ IDEA
			Comment=IntelliJ IDEA
			Exec=/opt/ideaIU/bin/idea.sh
			Icon=/opt/ideaIU/bin/idea.png
			Terminal=false
			Type=Application
			Categoories=Developer;
			EOF
			
			chmod +x /opt/ideaIU/bin/idea.sh
			chmod u+x ~/Desktop/ideaIU.desktop
		fi
		
		
		##å®‰è£…Java
		msg $red "å®‰è£…Javaç¯å¢ƒï¼"
		sudo apt-get install  default-jre* -y
		
		rm -rf ideaIC-2022.2.tar.gz ideaIU-2022.2.tar.gz 
		cd ~
		msg $green "å®‰è£…å®Œæ¯•ï½"
		echo -e "\n\n\t$redå¦‚æœå› ç½‘ç»œæ³¢åŠ¨æ²¡æœ‰å®‰è£…æˆåŠŸçš„ï¼Œè¯·å¸è½½é‡è£…ï¼$white"
		enter
	}
	
	_d(){
		if [ "$1" == 1 ];then
			msg $red "å¸è½½IntelliJ IDEAå…è´¹ç‰ˆ"
			rm -rf /opt/ideaIC /opt/ideaIC.desktop
		else
			msg $red "å¸è½½IntelliJ IDEAä»˜è´¹ç‰ˆ"
			rm -rf /opt/ideaIU /opt/ideaIU.desktop
		fi
		
		msg $green "å¸è½½å®Œæ¯•ï½"
		enter
	}
	
	OPTIONS=(
         1 "å®‰è£…IntelliJ IDEA"
         2 "å¸è½½IntelliJ IDEA"
         3 "å–æ¶ˆ")
    
    _dialog "é¦–é¡µâ†’å®‰è£…/å¸è½½è½¯ä»¶â†’IntelliJ IDEA 2022.2ç‰ˆæœ¬" "è¯·é€‰æ‹©" $OPTIONS

	case $op in
    	1)
    		OPTIONS=(
	        1 "ç¤¾åŒºç‰ˆIC_å…è´¹"
 	        2 "ä¼ä¸šç‰ˆIU_ä»˜è´¹"
  		    3 "å–æ¶ˆ")
			
			_dialog "é¦–é¡µâ†’å®‰è£…è½¯ä»¶â†’IntelliJ IDEA" "è¯·é€‰æ‹©" $OPTIONS
			
			case $op in
		    	1)
  			  		_i 1
    				;;
		    	2)
		    		_i 2
 			  		;;
    			*)
    				return
	    		;;
			esac
    		;;
    	2)
    		OPTIONS=(
	        1 "ç¤¾åŒºç‰ˆIC_å…è´¹"
 	        2 "ä¼ä¸šç‰ˆIU_ä»˜è´¹"
  		    3 "å–æ¶ˆ")
			
			_dialog "é¦–é¡µâ†’å¸è½½è½¯ä»¶â†’IntelliJ IDEA" "è¯·é€‰æ‹©" $OPTIONS
			
			case $op in
		    	1)
  			  		_d 1
    				;;
		    	2)
		    		_d 2
 			  		;;
    			*)
    				return
	    			;;
			esac
    		;;
    	*)
    		return
    		;;
	esac
}

##ğŸ
_xrdp(){
	_i(){	
		msg $red "å®‰è£…xrdp DRè¿œç¨‹æ¡Œé¢"
		sudo apt install xrdp -y
		sed -i '6{s/^/xfce4-session/}' /etc/X11/Xsession
		echo xfce4-session >~/.xsession
		sed -i "s#port=-1#port=5901#g" /etc/xrdp/xrdp.ini
		
		msg $green "å®‰è£…å®Œæ¯•ï½"
		enter
	}
	
	_d(){
		msg $red "å¸è½½xrdp DRè¿œç¨‹æ¡Œé¢"
		sudo apt purge xrdp -y
		msg $green "å¸è½½å®Œæ¯•ï½"
		enter
	}
	
	OPTIONS=(
         1 "å®‰è£…xrdp DRè¿œç¨‹æ¡Œé¢"
         2 "å¸è½½xrdp DRè¿œç¨‹æ¡Œé¢"
         3 "å–æ¶ˆ")
    
    _dialog "é¦–é¡µâ†’å®‰è£…/å¸è½½è½¯ä»¶â†’xrdp DRè¿œç¨‹æ¡Œé¢" "è¯·é€‰æ‹©" $OPTIONS

	case $op in
    	1)
    		_i
    		;;
    	2)
    		_d
    		;;
    	*)
    		return
    		;;
	esac
}

##ğŸ
_eclipse(){
	echo
}

##ğŸ
_qq(){
	msg $red "å¬è¯´ä½ æƒ³å®‰è£…QQï¼Ÿ"
	echo -en "$greenè€è€å®å®ç”¨æ‰‹æœºQQå­â€¦â€¦ä½ è¿˜å«Œå†…å­˜ç”¨ä¸å®Œå—ï¼Ÿ$white"
	enter
}



##å®‰è£…/å¸è½½è½¯ä»¶ğŸ
_app(){
	OPTIONS=(
         1 "Cchromiumæµè§ˆå™¨"
         2 "ç«ç‹firefoxæµè§ˆå™¨"
         3 "IntelliJ IDEA"
         4 "VSCode"
         5 "Eclipse"
         6 "xrdp DRè¿œç¨‹æ¡Œé¢"
         7 "QQ"
         8 "å–æ¶ˆ")
	
	_dialog "é¦–é¡µâ†’å®‰è£…/å¸è½½è½¯ä»¶" "è¯·é€‰æ‹©" $OPTIONS
	
	case $op in
    	1)
    		_chromium
    		;;
    	2)
    		_firefox
    		;;
    	3)
    		_idea
    		;;
    	4)
    		_vscode
    		;;
    	5)
    		_eclipse
    		;;
    	6)
    		_xrdp
    		;;
    	7)
    		_qq
    		;;
    	*)
    		return
    	;;
	esac
}

##ä¸»é¢˜-------------------------------------------------------å·¥ä½œåŒº---------------------------------------------------------------------------------------------------------
_theme(){
	
	##.icons
	_ICONS=(
	"Colloid-cursors.tar.xz"
	"Colloid-dark-cursors.tar.xz"
	"Fluent-cursors.tar.xz"
	"Fluent-dark-cursors.tar.xz"
	"Layan-border-cursors.tar.xz"
	"Layan-cursors.tar.xz"
	"Layan-white-cursors.tar.xz"
	"Nordzy-cursors-lefthand.tar.xz"
	"Nordzy-cursors-white.tar.xz"
	"Nordzy-cursors.tar.xz"
	"WhiteSur-cursors.tar.xz"
	"oreo_black_cursors.tar.xz"
	"oreo_spark_green_cursors.tar.xz"
	"oreo_spark_purple_cursors.tar.xz"
	"oreo_spark_red_cursors.tar.xz"
	"volantes_cursors.tar.xz"
	)
	
	##.themes
	THEMES=(
	"Mojave-Dark.tar.xz"
	"Mojave-Light.tar.xz"
	"Nordic.tar.xz"
	"WhiteSur-Light-green.tar.xz"
	"WhiteSur-Light-red.tar.xz"
	"vimix-amethyst.tar.xz"
	"vimix-beryl.tar.xz"
	"vimix-dark-amethyst.tar.xz"
	"vimix-dark-beryl.tar.xz"
	"vimix-dark-doder.tar.xz"
	"vimix-dark-ruby.tar.xz"
	"vimix-dark.tar.xz"
	"vimix-doder.tar.xz"
	"vimix-light-amethyst.tar.xz"
	"vimix-light-beryl.tar.xz"
	"vimix-light-doder.tar.xz"
	"vimix-light-ruby.tar.xz"
	"vimix-light.tar.xz"
	"vimix-ruby.tar.xz"
	"vimix.tar.xz"
	)
	
	##background
	BG=(
	"Layan1.tar.xz"
	"Layan2.tar.xz"
	"MacOS1.tar.xz"
	"MacOS3.tar.xz"
	"inMouse_5K.tar.xz"
	"inMouse_WQHD.tar.xz"
	"sweet.tar.xz"
	)
	
	##icons
	ICONS=(
	"Marwaita.tar.xz"
	"McMojave-circle-dark.tar.xz"
	"McMojave-circle.tar.xz"
	"Qogir-dark.tar.xz"
	"Qogir.tar.xz"
	"Reversal-black.tar.xz"
	"Reversal-blue.tar.xz"
	"Reversal-brown.tar.xz"
	"Reversal-cyan.tar.xz"
	"Reversal-green.tar.xz"
	"Reversal-grey.tar.xz"
	"Reversal-orange.tar.xz"
	"Reversal-pink.tar.xz"
	"Reversal-purple.tar.xz"
	"Reversal-red.tar.xz"
	"Tela-circle-dark.tar.xz"
	"Tela-circle.tar.xz"
	"WhiteSur-dark.tar.xz"
	"WhiteSur.tar.xz"
	)
	
	_changeOP(){
		tmp=""
		count=1
		export FILE=()
		for x in $*
		do
			printf " $count" >> /tmp/file
			printf " $x" >> /tmp/file
			FILE[$(($count-1))]=$x
			let count++
		done
		
		sed -i "s#.tar.xz##g"  /tmp/file
		printf " $count" >> /tmp/file
		printf " å–æ¶ˆ" >> /tmp/file
		export OPTIONS=()
		count=0
		for x in `cat  /tmp/file`
		do
			OPTIONS[$count]="$x"
			let count++
		done
		rm -rf /tmp/file
	}
	
	_bg(){
		_changeOP ${BG[@]}
		_dialog "é¦–é¡µâ†’æ¡Œé¢ç¾åŒ–â†’æ¡Œé¢èƒŒæ™¯" "è¯·é€‰æ‹©" $OPTIONS
		
		##é€‰æ‹©å–æ¶ˆï¼Œå°±é€€å‡º
		[ "$op" == "$((${#FILE[*]}+1))" ]&&return

		package=${FILE[$(($op-1))]}
		[ ! -e /tmp/bg/ ]&&mkdir -p /tmp/bg/
		
		if [ ! -e "/tmp/bg/`echo $package | sed "s#.tar.xz##g"`" ];then
			msg $red "ä¸‹è½½èµ„æºåŒ…â€¦ing"
			wget -c "https://raw.githubusercontent.com/WindowHZT/termux-ubuntu2004/main/bg/$package" -O "/tmp/bg/$package"
			
			msg $red "è§£å‹èµ„æºâ€¦ing"
			sleep 1
			xz -d "/tmp/bg/$package"
			tar -xvhf "/tmp/bg/`echo $package | sed "s#.xz##g"`" -C /tmp/bg/
		fi
		
		
		image="`echo $package | sed "s#.tar.xz##g"`"
		for x in jpg png bmp jpeg
		do
			if [ -a "/tmp/bg/$image.$x" ];then
				xfconf-query -c xfce4-desktop -p /backdrop/screen0/monitorVNC-0/workspace0/last-image -s  "/tmp/bg/$image.$x"
			fi
		done
		
		msg $green "è®¾ç½®æ¡Œé¢èƒŒæ™¯`echo $package | sed "s#.tar.xz##g"`å®Œæˆï½"
		echo -e "$green\n\n\tå¦‚ä½•æ¡Œé¢èƒŒæ™¯æ²¡æœ‰è®¾ç½®æˆåŠŸè¯·æ£€æŸ¥ç½‘ç»œï¼Œå†é‡æ–°è®¾ç½®ï¼"
		enter
	}
	
	_themes(){
		_changeOP ${THEMES[@]}
		_dialog "é¦–é¡µâ†’æ¡Œé¢ç¾åŒ–â†’ä¸»é¢˜" "è¯·é€‰æ‹©" $OPTIONS
		
		##é€‰æ‹©å–æ¶ˆï¼Œå°±é€€å‡º
		[ "$op" == "$((${#FILE[*]}+1))" ]&&return

		package=${FILE[$(($op-1))]}
		[ ! -e /tmp/.themes/ ]&&mkdir -p /tmp/.themes/
		
		if [ ! -e "~/.themes/`echo $package | sed "s#.tar.xz##g"`" ];then
			[ ! -e ~/.themes ]&&mkdir -p ~/.themes 
			msg $red "ä¸‹è½½èµ„æºåŒ…â€¦ing"
			wget -c "https://raw.githubusercontent.com/WindowHZT/termux-ubuntu2004/main/.themes/$package" -O "/tmp/.themes/$package"
			
			msg $red "è§£å‹èµ„æºâ€¦ing"
			sleep 1
			xz -d "/tmp/.themes/$package"
			tar -xvhf "/tmp/.themes/`echo $package | sed "s#.xz##g"`" -C ~/.themes/
		fi
		
		xfconf-query -c xsettings -p /Net/ThemeName -s "`echo $package | sed "s#.tar.xz##g"`"
		
		msg $green "è®¾ç½®ä¸»é¢˜`echo $package | sed "s#.tar.xz##g"`å®Œæˆï½"
		echo -e "$green\n\n\tå¦‚ä½•ä¸»é¢˜æ²¡æœ‰è®¾ç½®æˆåŠŸè¯·æ£€æŸ¥ç½‘ç»œï¼Œå†é‡æ–°è®¾ç½®ï¼"
		enter
	}
	
	_icons(){
		_changeOP ${ICONS[@]}
		_dialog "é¦–é¡µâ†’æ¡Œé¢ç¾åŒ–â†’è½¯ä»¶å›¾æ ‡" "è¯·é€‰æ‹©" $OPTIONS
		
		##é€‰æ‹©å–æ¶ˆï¼Œå°±é€€å‡º
		[ "$op" == "$((${#FILE[*]}+1))" ]&&return

		package=${FILE[$(($op-1))]}
		[ ! -e /tmp/icons/ ]&&mkdir -p /tmp/icons/
		
		if [ ! -e "~/icons/`echo $package | sed "s#.tar.xz##g"`" ];then
			[ ! -e ~/.local/share/icons  ]&&mkdir -p ~/.local/share/icons 
			msg $red "ä¸‹è½½èµ„æºåŒ…â€¦ing"
			sleep 1
			wget -c "https://raw.githubusercontent.com/WindowHZT/termux-ubuntu2004/main/icons/$package" -O "/tmp/icons/$package"
			
			msg $red "è§£å‹èµ„æºâ€¦ing"
			xz -d "/tmp/icons/$package"
			tar -xvhf "/tmp/icons/`echo $package | sed "s#.xz##g"`" -C ~/.local/share/icons 
		fi
		
		xfconf-query -c xsettings -p /Net/IconThemeName -s "`echo $package | sed "s#.tar.xz##g"`"
		
		msg $green "è®¾ç½®è½¯ä»¶å›¾æ ‡`echo $package | sed "s#.tar.xz##g"`å®Œæˆï½"
		echo -e "$green\n\n\tå¦‚ä½•è½¯ä»¶å›¾æ ‡æ²¡æœ‰è®¾ç½®æˆåŠŸè¯·æ£€æŸ¥ç½‘ç»œï¼Œå†é‡æ–°è®¾ç½®ï¼"
		enter
	
	}
		
	_mouse(){
		_changeOP ${_ICONS[@]}
		_dialog "é¦–é¡µâ†’æ¡Œé¢ç¾åŒ–â†’å…‰æ ‡(é¼ æ ‡)" "è¯·é€‰æ‹©" $OPTIONS
		
		##é€‰æ‹©å–æ¶ˆï¼Œå°±é€€å‡º
		[ "$op" == "$((${#FILE[*]}+1))" ]&&return

		package=${FILE[$(($op-1))]}
		[ ! -e /tmp/.icons/ ]&&mkdir -p /tmp/.icons/
		
		if [ ! -e "~/.icons/`echo $package | sed "s#.tar.xz##g"`" ];then
			[ ! -e ~/.icons  ]&&mkdir -p ~/.icons 
			msg $red "ä¸‹è½½èµ„æºåŒ…â€¦ing"
			sleep 1
			wget -c "https://raw.githubusercontent.com/WindowHZT/termux-ubuntu2004/main/.icons/$package" -O "/tmp/.icons/$package"
			
			msg $red "è§£å‹èµ„æºâ€¦ing"
			xz -d "/tmp/.icons/$package"
			tar -xvhf "/tmp/.icons/`echo $package | sed "s#.xz##g"`" -C ~/.icons 
		fi
		
		xfconf-query -c xsettings -p /Gtk/CursorThemeName -s "`echo $package | sed "s#.tar.xz##g"`"
		
		msg $green "è®¾ç½®å…‰æ ‡(é¼ æ ‡)`echo $package | sed "s#.tar.xz##g"`å®Œæˆï½"
		echo -e "$green\n\n\tå¦‚ä½•å…‰æ ‡(é¼ æ ‡)æ²¡æœ‰è®¾ç½®æˆåŠŸè¯·æ£€æŸ¥ç½‘ç»œï¼Œå†é‡æ–°è®¾ç½®ï¼"
		enter	
	}
	
	
	
		OPTIONS=(
			1 "æ¡Œé¢èƒŒæ™¯"   ##bg
			2 "ä¸»é¢˜"    ##.themes
			3 "è½¯ä»¶å›¾æ ‡"   ##local/share/icons
			4 "å…‰æ ‡(é¼ æ ‡)"  ##.icons
			5 "å–æ¶ˆ")

    _dialog "é¦–é¡µâ†’æ¡Œé¢ç¾åŒ–" "è¯·é€‰æ‹©" $OPTIONS
    
	case $op in
    	1)
    		_bg
    		;;
    	2)
    		_themes
    		;;
    	3)
    		_icons
    		;;
    	4)
    		_mouse
    		;;
    	*)
    		return
    		;;
	esac

}
##ä¸»é¢˜----------------------------------------------------------------------------------------------------------------------------------------------------------------



##æ›´æ¢è¯­è¨€
_language(){
	_en(){
		msg $green "æ›´æ¢ä¸ºè‹±è¯­"
		sed -i "s#export LC_ALL=zh_CN.UTF-8##g" ~/.bashrc
		echo -e "$red\n\n\tæ­¤æ“ä½œä»…ä¼šåˆ é™¤ .bashrc é‡Œé¢çš„ export LC_ALL=zh_CN.UTF-8$white"
		echo -e "$red\n\n\té‡å¯åç”Ÿæ•ˆï¼$white"
		enter
	}
	
	_zh(){
		msg $green "æ›´æ¢ä¸ºä¸­æ–‡"
		[ -z "`dpkg -l | grep fonts-wqy-microhei`" ]&&sudo apt-get install fonts-wqy-microhei -y
		[ ! -z "`cat /etc/locale.gen|grep '# zh_CN.UTF-8 UTF-8'`" ]&&sed -i "s/# zh_CN.UTF-8 UTF-8/ zh_CN.UTF-8 UTF-8/g" /etc/locale.gen
		locale-gen
		
		[ -z "`cat ~/.bashrc |grep  'export LC_ALL=zh_CN.UTF-8'`" ]&&echo "export LC_ALL=zh_CN.UTF-8" >> ~/.bashrc
		if [[ "`cat ~/.bashrc`" =~ 'if [ "$TERM"="linux" ] ;then ' ]]; then
			echo 'string exist'
		else
		    cat <<-EOF>>~/.bashrc
			if [ "\$TERM"="linux" ] ;then 
				export LANGUAGE=en_US 
			fi 
			EOF
		
		fi
		
		echo -e "$red\n\n\té‡å¯åç”Ÿæ•ˆï¼$white"
		enter
	}
	
	
		OPTIONS=(
			1 "è‹±æ–‡"   
			2 "ä¸­æ–‡"    
			3 "å–æ¶ˆ")

    _dialog "é¦–é¡µâ†’æ›´æ¢è¯­è¨€" "è¯·é€‰æ‹©" $OPTIONS
 
	case $op in
    	1)
    		_en
    		;;
    	2)
    		_zh
    		;;
    	*)
    		return
    		;;
	esac   
}

##ç»ˆç«¯ç¾åŒ–
_term(){
	echo
}

##ä½œè€…ç•™è¨€
_other(){
	clear
	echo -e "$redå¾ˆå¹¸è¿ä¸ä½ ç›¸é‡ï½ï½$white"
	#echo -e "$red æ­¤ubuntu20.04æ˜¯upä¸»å‚è€ƒäº†å„å¤§æ•™ç¨‹æ‰€åˆ›é€ çš„ç‰ˆæœ¬ï¼$white"
	enter
}

_dialog(){
	export LC_ALL="zh_CN.UTF-8"
	export PORT=1
	
	dialog --clear \
		--backtitle "$1" \
		--title "@å‚(â€¢Ì€âŒ„â€¢Ì)èŠœæ¹–èµ·é£" \
	 	--nocancel \
	 	--menu "$2" 20 40 8 \
		"${OPTIONS[@]}" \
	 	2>/tmp/menu
	 	
	 	export op=`cat /tmp/menu`
}



_Main(){
	OPTIONS=(
         1 "å®‰è£…/å¸è½½è½¯ä»¶"
         2 "æ¡Œé¢ç¾åŒ–"
         3 "æ›´æ¢è¯­è¨€"
         #4 "ç¾åŒ–ç»ˆç«¯"  ##sh -c "$(curl -fsSL https://gitee.com/mirrors/oh-my-zsh/raw/master/tools/install.sh)"
         4 "ä½œè€…ç•™è¨€"
         5 "vnc ä¿¡æ¯"
         6 "ç‰ˆæœ¬ä¿¡æ¯"
         7 "é€€å‡º")
    
    _dialog "é¦–é¡µ" "ä½¿ç”¨â†‘â†“é€‰æ‹©ï¼Œä¹Ÿå¯ä»¥ç”¨æ‰‹ç‚¹å‡»é€‰é¡¹å†å›è½¦å“¦" $OPTIONS
	
    case $op in 
    	1)
    		_app
    		;;
    	2)
    		_theme
    		;;
    	3)
    		_language
    		;;
    	4)
    		_other
    		;;
    	5)
    		clear
    		vnc
    		enter
    		;;
    	6)
    		msg $red "ubuntuè®¾å¤‡ä¿¡æ¯"
			echo -e "$green----------------ç‰ˆæœ¬-----------------$white"
			lsb_release -a
			echo -e "$green----------------ç£ç›˜-----------------$white"
			df -hl
    		enter
    		;;
    	*)
    		clear
    		export s=1
    		;;
esac
}

while :
do
	if [ "$s" == "0" ];then
		_Main
	else
		break
	fi
done







